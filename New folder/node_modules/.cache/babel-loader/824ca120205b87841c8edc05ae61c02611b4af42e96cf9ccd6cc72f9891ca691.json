{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import axios from\"axios\";import\"./feedback.css\";// Import CSS file\n// Axios Instance\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const ai=axios.create({baseURL:\"https://railwaymcq.com/student/dbfeedback_api.php\"});export default function FeedBack_user(props){const[formData,setFormData]=useState({zone:\"\",division:\"\",deptt:\"\",message:\"\"});const[errors,setErrors]=useState({});const[options,setOptions]=useState([]);// for zone option create a state\nconst fetchData=async()=>{try{const response=await axios.get(\"https://railwaymcq.com/ohe/zone_division_api.php\");setOptions(response.data);}catch(error){console.error(\"Error fetching options:\",error);}};const handleChange=e=>{const{name,value}=e.target;setFormData(prevState=>({...prevState,[name]:value}));// Validate input\nif(name===\"name\"&&value.length<3){setErrors({...errors,name:\"Name must be at least 3 characters long\"});}else if(name===\"email\"&&!/\\S+@\\S+\\.\\S+/.test(value)){setErrors({...errors,email:\"Invalid email address\"});}else{setErrors({...errors,[name]:\"\"});}};const handleSubmit=async e=>{e.preventDefault();try{console.log(\"Form Data:\",JSON.stringify(formData,null,2));if(Object.values(errors).some(error=>error!==\"\")){alert(\"Please fix the errors before submitting the form\");return;}const response=await axios.post(\"https://railwaymcq.com/student/dbfeedback_api.php\",formData);// const response = await ai.post(\"\", formData);\nconsole.log(\"Data added successfully:\",response.data);// Clear form fields after successful submission\nsetFormData({zone:\"\",division:\"\",deptt:\"\",message:\"\"});}catch(error){console.error(\"Error adding data:\",error);}};// for fetch data from backend start\nconst[getFeedback,setFeedback]=useState([]);const getAllFeedback=async()=>{try{const Feedbackdata=await ai.get(\"/Feedback/list/\");setFeedback(Feedbackdata.data);}catch(error){console.log(error);}};const handleOptionClick=value=>{console.log(\"Selected option:\",value);// You can add your logic here for handling the selected option\n};useEffect(()=>{getAllFeedback();fetchData();},[]);return/*#__PURE__*/_jsx(\"div\",{className:\"feedback-container\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h6\",{children:props.heading}),/*#__PURE__*/_jsxs(\"select\",{className:\"form-select\",name:\"zone\",value:formData.zone,onChange:handleChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Please select Zone\"}),/*#__PURE__*/_jsx(\"option\",{value:\"WCR\",children:\"WCR\"}),/*#__PURE__*/_jsx(\"option\",{value:\"ECR\",children:\"ECR\"}),/*#__PURE__*/_jsx(\"option\",{value:\"NCR\",children:\"NCR\"})]}),/*#__PURE__*/_jsxs(\"select\",{className:\"form-select\",name:\"division\",value:formData.division,onChange:handleChange,children:[/*#__PURE__*/_jsx(\"option\",{children:\"Please select Division\"}),/*#__PURE__*/_jsx(\"option\",{value:\"JBP\",children:\"Jabalpur\"}),/*#__PURE__*/_jsx(\"option\",{value:\"KOTA\",children:\"Kota\"}),/*#__PURE__*/_jsx(\"option\",{value:\"BPL\",children:\"Bhopal\"})]}),/*#__PURE__*/_jsxs(\"select\",{className:\"form-select\",name:\"deptt\",value:formData.deptt,onChange:handleChange,children:[/*#__PURE__*/_jsx(\"option\",{children:\"Please select Department\"}),/*#__PURE__*/_jsx(\"option\",{value:\"GEN. ELECTRICAL\",children:\"Jabalpur\"}),/*#__PURE__*/_jsx(\"option\",{value:\"TRD\",children:\"Kota\"}),/*#__PURE__*/_jsx(\"option\",{value:\"TRS\",children:\"Bhopal\"})]}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"mybox\",className:\"form-label\",children:/*#__PURE__*/_jsx(\"strong\",{children:\"Please feel free to leave any Feedback here\"})}),/*#__PURE__*/_jsx(\"textarea\",{type:\"text\",name:\"message\",value:formData.message,onChange:handleChange,className:\"form-control\",id:\"myBox\",rows:\"4\",col:\"8\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:\"Save Feedback\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"feedback-list\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Your Feedbacks\"}),getFeedback.map(item=>/*#__PURE__*/_jsxs(\"li\",{children:[item.zone,\" - \",item.division,\" - \",item.message,\" - \",item.date]},item.id))]})]})});}","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","ai","create","baseURL","FeedBack_user","props","formData","setFormData","zone","division","deptt","message","errors","setErrors","options","setOptions","fetchData","response","get","data","error","console","handleChange","e","name","value","target","prevState","length","test","email","handleSubmit","preventDefault","log","JSON","stringify","Object","values","some","alert","post","getFeedback","setFeedback","getAllFeedback","Feedbackdata","handleOptionClick","className","children","onSubmit","heading","onChange","htmlFor","type","id","rows","col","map","item","date"],"sources":["C:/Users/hp/Desktop/project/test/src/Component/FeedBack_user.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport \"./feedback.css\"; // Import CSS file\r\n\r\n// Axios Instance\r\nconst ai = axios.create({\r\n  baseURL: \"https://railwaymcq.com/student/dbfeedback_api.php\",\r\n});\r\n\r\nexport default function FeedBack_user(props) {\r\n  const [formData, setFormData] = useState({\r\n    zone: \"\",\r\n    division: \"\",\r\n    deptt: \"\",\r\n    message: \"\",\r\n  });\r\n\r\n  const [errors, setErrors] = useState({});\r\n\r\n  const [options, setOptions] = useState([]); // for zone option create a state\r\n\r\n  const fetchData = async () => {\r\n    try {\r\n      const response = await axios.get(\r\n        \"https://railwaymcq.com/ohe/zone_division_api.php\"\r\n      );\r\n      setOptions(response.data);\r\n    } catch (error) {\r\n      console.error(\"Error fetching options:\", error);\r\n    }\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n\r\n    setFormData((prevState) => ({\r\n      ...prevState,\r\n      [name]: value,\r\n    }));\r\n\r\n    // Validate input\r\n    if (name === \"name\" && value.length < 3) {\r\n      setErrors({ ...errors, name: \"Name must be at least 3 characters long\" });\r\n    } else if (name === \"email\" && !/\\S+@\\S+\\.\\S+/.test(value)) {\r\n      setErrors({ ...errors, email: \"Invalid email address\" });\r\n    } else {\r\n      setErrors({ ...errors, [name]: \"\" });\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      console.log(\"Form Data:\", JSON.stringify(formData, null, 2));\r\n\r\n      if (Object.values(errors).some((error) => error !== \"\")) {\r\n        alert(\"Please fix the errors before submitting the form\");\r\n        return;\r\n      }\r\n      const response = await axios.post(\r\n        \"https://railwaymcq.com/student/dbfeedback_api.php\",\r\n        formData\r\n      );\r\n      // const response = await ai.post(\"\", formData);\r\n      console.log(\"Data added successfully:\", response.data);\r\n      // Clear form fields after successful submission\r\n      setFormData({\r\n        zone: \"\",\r\n        division: \"\",\r\n        deptt: \"\",\r\n        message: \"\",\r\n      });\r\n    } catch (error) {\r\n      console.error(\"Error adding data:\", error);\r\n    }\r\n  };\r\n\r\n  // for fetch data from backend start\r\n  const [getFeedback, setFeedback] = useState([]);\r\n\r\n  const getAllFeedback = async () => {\r\n    try {\r\n      const Feedbackdata = await ai.get(\"/Feedback/list/\");\r\n      setFeedback(Feedbackdata.data);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  const handleOptionClick = (value) => {\r\n    console.log(\"Selected option:\", value);\r\n    // You can add your logic here for handling the selected option\r\n  };\r\n\r\n  useEffect(() => {\r\n    getAllFeedback();\r\n    fetchData();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"feedback-container\">\r\n      <form onSubmit={handleSubmit}>\r\n        <h6>{props.heading}</h6>\r\n\r\n        {/* {options.map((option) => (\r\n          <button\r\n            key={option.id}\r\n            onClick={() => handleOptionClick(option.value)}\r\n          >\r\n            {option.label}\r\n          </button>\r\n        ))} */}\r\n\r\n        <select\r\n          className=\"form-select\"\r\n          name=\"zone\"\r\n          value={formData.zone}\r\n          onChange={handleChange}\r\n        >\r\n          <option value=\"\">Please select Zone</option>\r\n          <option value=\"WCR\">WCR</option>\r\n          <option value=\"ECR\">ECR</option>\r\n          <option value=\"NCR\">NCR</option>\r\n        </select>\r\n\r\n        <select\r\n          className=\"form-select\"\r\n          name=\"division\"\r\n          value={formData.division}\r\n          onChange={handleChange}\r\n        >\r\n          <option>Please select Division</option>\r\n          <option value=\"JBP\">Jabalpur</option>\r\n          <option value=\"KOTA\">Kota</option>\r\n          <option value=\"BPL\">Bhopal</option>\r\n        </select>\r\n\r\n        <select\r\n          className=\"form-select\"\r\n          name=\"deptt\"\r\n          value={formData.deptt}\r\n          onChange={handleChange}\r\n        >\r\n          <option>Please select Department</option>\r\n          <option value=\"GEN. ELECTRICAL\">Jabalpur</option>\r\n          <option value=\"TRD\">Kota</option>\r\n          <option value=\"TRS\">Bhopal</option>\r\n        </select>\r\n        <label htmlFor=\"mybox\" className=\"form-label\">\r\n          <strong>Please feel free to leave any Feedback here</strong>\r\n        </label>\r\n        <textarea\r\n          type=\"text\"\r\n          name=\"message\"\r\n          value={formData.message}\r\n          onChange={handleChange}\r\n          className=\"form-control\"\r\n          id=\"myBox\"\r\n          rows=\"4\"\r\n          col=\"8\"\r\n        ></textarea>\r\n\r\n        <button type=\"submit\" className=\"btn btn-primary\">\r\n          Save Feedback\r\n        </button>\r\n        <ul className=\"feedback-list\">\r\n          <h4>Your Feedbacks</h4>\r\n          {getFeedback.map((item) => (\r\n            <li key={item.id}>\r\n              {item.zone} - {item.division} - {item.message} - {item.date}\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,gBAAgB,CAAE;AAEzB;AAAA,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBACA,KAAM,CAAAC,EAAE,CAAGL,KAAK,CAACM,MAAM,CAAC,CACtBC,OAAO,CAAE,mDACX,CAAC,CAAC,CAEF,cAAe,SAAS,CAAAC,aAAaA,CAACC,KAAK,CAAE,CAC3C,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGb,QAAQ,CAAC,CACvCc,IAAI,CAAE,EAAE,CACRC,QAAQ,CAAE,EAAE,CACZC,KAAK,CAAE,EAAE,CACTC,OAAO,CAAE,EACX,CAAC,CAAC,CAEF,KAAM,CAACC,MAAM,CAAEC,SAAS,CAAC,CAAGnB,QAAQ,CAAC,CAAC,CAAC,CAAC,CAExC,KAAM,CAACoB,OAAO,CAAEC,UAAU,CAAC,CAAGrB,QAAQ,CAAC,EAAE,CAAC,CAAE;AAE5C,KAAM,CAAAsB,SAAS,CAAG,KAAAA,CAAA,GAAY,CAC5B,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAArB,KAAK,CAACsB,GAAG,CAC9B,kDACF,CAAC,CACDH,UAAU,CAACE,QAAQ,CAACE,IAAI,CAAC,CAC3B,CAAE,MAAOC,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,yBAAyB,CAAEA,KAAK,CAAC,CACjD,CACF,CAAC,CAED,KAAM,CAAAE,YAAY,CAAIC,CAAC,EAAK,CAC1B,KAAM,CAAEC,IAAI,CAAEC,KAAM,CAAC,CAAGF,CAAC,CAACG,MAAM,CAEhCnB,WAAW,CAAEoB,SAAS,GAAM,CAC1B,GAAGA,SAAS,CACZ,CAACH,IAAI,EAAGC,KACV,CAAC,CAAC,CAAC,CAEH;AACA,GAAID,IAAI,GAAK,MAAM,EAAIC,KAAK,CAACG,MAAM,CAAG,CAAC,CAAE,CACvCf,SAAS,CAAC,CAAE,GAAGD,MAAM,CAAEY,IAAI,CAAE,yCAA0C,CAAC,CAAC,CAC3E,CAAC,IAAM,IAAIA,IAAI,GAAK,OAAO,EAAI,CAAC,cAAc,CAACK,IAAI,CAACJ,KAAK,CAAC,CAAE,CAC1DZ,SAAS,CAAC,CAAE,GAAGD,MAAM,CAAEkB,KAAK,CAAE,uBAAwB,CAAC,CAAC,CAC1D,CAAC,IAAM,CACLjB,SAAS,CAAC,CAAE,GAAGD,MAAM,CAAE,CAACY,IAAI,EAAG,EAAG,CAAC,CAAC,CACtC,CACF,CAAC,CAED,KAAM,CAAAO,YAAY,CAAG,KAAO,CAAAR,CAAC,EAAK,CAChCA,CAAC,CAACS,cAAc,CAAC,CAAC,CAClB,GAAI,CACFX,OAAO,CAACY,GAAG,CAAC,YAAY,CAAEC,IAAI,CAACC,SAAS,CAAC7B,QAAQ,CAAE,IAAI,CAAE,CAAC,CAAC,CAAC,CAE5D,GAAI8B,MAAM,CAACC,MAAM,CAACzB,MAAM,CAAC,CAAC0B,IAAI,CAAElB,KAAK,EAAKA,KAAK,GAAK,EAAE,CAAC,CAAE,CACvDmB,KAAK,CAAC,kDAAkD,CAAC,CACzD,OACF,CACA,KAAM,CAAAtB,QAAQ,CAAG,KAAM,CAAArB,KAAK,CAAC4C,IAAI,CAC/B,mDAAmD,CACnDlC,QACF,CAAC,CACD;AACAe,OAAO,CAACY,GAAG,CAAC,0BAA0B,CAAEhB,QAAQ,CAACE,IAAI,CAAC,CACtD;AACAZ,WAAW,CAAC,CACVC,IAAI,CAAE,EAAE,CACRC,QAAQ,CAAE,EAAE,CACZC,KAAK,CAAE,EAAE,CACTC,OAAO,CAAE,EACX,CAAC,CAAC,CACJ,CAAE,MAAOS,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,oBAAoB,CAAEA,KAAK,CAAC,CAC5C,CACF,CAAC,CAED;AACA,KAAM,CAACqB,WAAW,CAAEC,WAAW,CAAC,CAAGhD,QAAQ,CAAC,EAAE,CAAC,CAE/C,KAAM,CAAAiD,cAAc,CAAG,KAAAA,CAAA,GAAY,CACjC,GAAI,CACF,KAAM,CAAAC,YAAY,CAAG,KAAM,CAAA3C,EAAE,CAACiB,GAAG,CAAC,iBAAiB,CAAC,CACpDwB,WAAW,CAACE,YAAY,CAACzB,IAAI,CAAC,CAChC,CAAE,MAAOC,KAAK,CAAE,CACdC,OAAO,CAACY,GAAG,CAACb,KAAK,CAAC,CACpB,CACF,CAAC,CAED,KAAM,CAAAyB,iBAAiB,CAAIpB,KAAK,EAAK,CACnCJ,OAAO,CAACY,GAAG,CAAC,kBAAkB,CAAER,KAAK,CAAC,CACtC;AACF,CAAC,CAED9B,SAAS,CAAC,IAAM,CACdgD,cAAc,CAAC,CAAC,CAChB3B,SAAS,CAAC,CAAC,CACb,CAAC,CAAE,EAAE,CAAC,CAEN,mBACElB,IAAA,QAAKgD,SAAS,CAAC,oBAAoB,CAAAC,QAAA,cACjC/C,KAAA,SAAMgD,QAAQ,CAAEjB,YAAa,CAAAgB,QAAA,eAC3BjD,IAAA,OAAAiD,QAAA,CAAK1C,KAAK,CAAC4C,OAAO,CAAK,CAAC,cAWxBjD,KAAA,WACE8C,SAAS,CAAC,aAAa,CACvBtB,IAAI,CAAC,MAAM,CACXC,KAAK,CAAEnB,QAAQ,CAACE,IAAK,CACrB0C,QAAQ,CAAE5B,YAAa,CAAAyB,QAAA,eAEvBjD,IAAA,WAAQ2B,KAAK,CAAC,EAAE,CAAAsB,QAAA,CAAC,oBAAkB,CAAQ,CAAC,cAC5CjD,IAAA,WAAQ2B,KAAK,CAAC,KAAK,CAAAsB,QAAA,CAAC,KAAG,CAAQ,CAAC,cAChCjD,IAAA,WAAQ2B,KAAK,CAAC,KAAK,CAAAsB,QAAA,CAAC,KAAG,CAAQ,CAAC,cAChCjD,IAAA,WAAQ2B,KAAK,CAAC,KAAK,CAAAsB,QAAA,CAAC,KAAG,CAAQ,CAAC,EAC1B,CAAC,cAET/C,KAAA,WACE8C,SAAS,CAAC,aAAa,CACvBtB,IAAI,CAAC,UAAU,CACfC,KAAK,CAAEnB,QAAQ,CAACG,QAAS,CACzByC,QAAQ,CAAE5B,YAAa,CAAAyB,QAAA,eAEvBjD,IAAA,WAAAiD,QAAA,CAAQ,wBAAsB,CAAQ,CAAC,cACvCjD,IAAA,WAAQ2B,KAAK,CAAC,KAAK,CAAAsB,QAAA,CAAC,UAAQ,CAAQ,CAAC,cACrCjD,IAAA,WAAQ2B,KAAK,CAAC,MAAM,CAAAsB,QAAA,CAAC,MAAI,CAAQ,CAAC,cAClCjD,IAAA,WAAQ2B,KAAK,CAAC,KAAK,CAAAsB,QAAA,CAAC,QAAM,CAAQ,CAAC,EAC7B,CAAC,cAET/C,KAAA,WACE8C,SAAS,CAAC,aAAa,CACvBtB,IAAI,CAAC,OAAO,CACZC,KAAK,CAAEnB,QAAQ,CAACI,KAAM,CACtBwC,QAAQ,CAAE5B,YAAa,CAAAyB,QAAA,eAEvBjD,IAAA,WAAAiD,QAAA,CAAQ,0BAAwB,CAAQ,CAAC,cACzCjD,IAAA,WAAQ2B,KAAK,CAAC,iBAAiB,CAAAsB,QAAA,CAAC,UAAQ,CAAQ,CAAC,cACjDjD,IAAA,WAAQ2B,KAAK,CAAC,KAAK,CAAAsB,QAAA,CAAC,MAAI,CAAQ,CAAC,cACjCjD,IAAA,WAAQ2B,KAAK,CAAC,KAAK,CAAAsB,QAAA,CAAC,QAAM,CAAQ,CAAC,EAC7B,CAAC,cACTjD,IAAA,UAAOqD,OAAO,CAAC,OAAO,CAACL,SAAS,CAAC,YAAY,CAAAC,QAAA,cAC3CjD,IAAA,WAAAiD,QAAA,CAAQ,6CAA2C,CAAQ,CAAC,CACvD,CAAC,cACRjD,IAAA,aACEsD,IAAI,CAAC,MAAM,CACX5B,IAAI,CAAC,SAAS,CACdC,KAAK,CAAEnB,QAAQ,CAACK,OAAQ,CACxBuC,QAAQ,CAAE5B,YAAa,CACvBwB,SAAS,CAAC,cAAc,CACxBO,EAAE,CAAC,OAAO,CACVC,IAAI,CAAC,GAAG,CACRC,GAAG,CAAC,GAAG,CACE,CAAC,cAEZzD,IAAA,WAAQsD,IAAI,CAAC,QAAQ,CAACN,SAAS,CAAC,iBAAiB,CAAAC,QAAA,CAAC,eAElD,CAAQ,CAAC,cACT/C,KAAA,OAAI8C,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC3BjD,IAAA,OAAAiD,QAAA,CAAI,gBAAc,CAAI,CAAC,CACtBN,WAAW,CAACe,GAAG,CAAEC,IAAI,eACpBzD,KAAA,OAAA+C,QAAA,EACGU,IAAI,CAACjD,IAAI,CAAC,KAAG,CAACiD,IAAI,CAAChD,QAAQ,CAAC,KAAG,CAACgD,IAAI,CAAC9C,OAAO,CAAC,KAAG,CAAC8C,IAAI,CAACC,IAAI,GADpDD,IAAI,CAACJ,EAEV,CACL,CAAC,EACA,CAAC,EACD,CAAC,CACJ,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}